import random
import telebot
from telebot import types
import codecs
import time
if_not_book = "Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ð¸ÑÐºÐ°Ð»Ð¸ Ð´Ñ€ÑƒÐ³ÑƒÑŽ ÐºÐ½Ð¸Ð³Ñƒ, Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, ÑƒÑ‚Ð¾Ñ‡Ð½Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð·Ð°Ð¿Ñ€Ð¾Ñ"
quantity = 996
command_list = 'ðŸ“šÐÐ°Ð¹Ñ‚Ð¸ ÐºÐ½Ð¸Ð³Ñƒ - Ð¡ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ ÑÑ‚Ð¾Ð¹ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð²Ñ‹ ÑÐ¼Ð¾Ð¶ÐµÑ‚Ðµ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð¹ Ð²Ð°Ð¼Ð¸ ÐºÐ½Ð¸Ð³Ð¸ Ð»Ð¸Ð±Ð¾ Ð² ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð¹ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐµ, Ð»Ð¸Ð±Ð¾ Ð²Ð¾ Ð²ÑÐµÑ… Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°Ñ… Ð³Ð¾Ñ€Ð¾Ð´Ð° ÑÑ€Ð°Ð·Ñƒ.\n\nðŸŒŸÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ†ÐµÐ½ÐºÑƒ - Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾, Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ð² ÐºÐ½Ð¸Ð³Ñƒ, Ð²Ñ‹ Ð·Ð°Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ²Ð¾ÑŽ Ð¾Ñ†ÐµÐ½ÐºÑƒ Ð¾ Ð½ÐµÐ¹. Ð—Ð´ÐµÑÑŒ Ð²Ñ‹ ÑÐ¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¾Ñ†ÐµÐ½Ð¸Ñ‚ÑŒ Ð¾Ð´Ð½Ñƒ Ð¸Ð· ÐºÐ½Ð¸Ð³ Ð¸ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ Ð´Ñ€ÑƒÐ³Ð¸Ð¼ Ñ‡Ð¸Ñ‚Ð°Ñ‚ÐµÐ»ÑÐ¼ Ð½Ð°Ð¹Ñ‚Ð¸ Ð´Ð»Ñ ÑÐµÐ±Ñ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð¾Ñ‡ÐµÐ½ÑŒ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾Ðµ.\n\nðŸ“ŠÐ ÐµÐ¹Ñ‚Ð¸Ð½Ð³ - Ð•ÑÐ»Ð¸ Ð²Ñ‹ ÑÐ¾Ð¼Ð½ÐµÐ²Ð°ÐµÑ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð¸Ð¼ÐµÐ½Ð½Ð¾ Ð²Ð°Ð¼ ÑÑ‚Ð¾Ð¸Ñ‚ Ð¿Ð¾Ñ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ, Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð²Ð¾ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³Ð¾Ð¼ ÐºÐ½Ð¸Ð³, ÑÐ¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¼ Ð´Ñ€ÑƒÐ³Ð¸Ð¼Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼Ð¸ Ð±Ð¾Ñ‚Ð°.\n\nðŸŽ²Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ð°Ñ ÐºÐ½Ð¸Ð³Ð° - Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ð½Ðµ Ð·Ð½Ð°ÐµÑ‚Ðµ, ÐºÐ°ÐºÑƒÑŽ Ð¸Ð¼ÐµÐ½Ð½Ð¾ ÐºÐ½Ð¸Ð³Ñƒ Ð²Ð°Ð¼ Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ, Ñ Ð¼Ð¾Ð³Ñƒ Ð¿Ð¾Ð´Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð´Ð»Ñ Ð²Ð°Ñ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½ÑƒÑŽ ÐºÐ½Ð¸Ð³Ñƒ.\n\nðŸŽ¯Ð’Ð¸ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð° - Ð‘Ñ‹Ð²Ð°ÐµÑ‚ Ñ‚Ð°ÐºÐ¾Ðµ, Ñ‡Ñ‚Ð¾ Ð¿Ð¾ÑÐ»Ðµ Ð¿Ñ€Ð¾Ñ‡Ñ‚ÐµÐ½Ð¸Ñ, Ñ‡ÐµÑ€ÐµÐ· Ð½ÐµÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ, Ð·Ð°Ð±Ñ‹Ð²Ð°ÐµÑ‚ÑÑ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ ÐºÐ½Ð¸Ð³Ð¸. ÐœÑ‹ ÑÐ¾Ð·Ð´Ð°Ð»Ð¸ Ð´Ð»Ñ Ð²Ð°Ñ Ñ‚ÐµÑÑ‚, Ð¿Ñ€Ð¾Ð¹Ð´Ñ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð²Ñ‹ ÑÐ¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ ÑÐ²Ð¾Ð¸Ñ… Ð·Ð½Ð°Ð½Ð¸Ð¹ Ð¸Ð»Ð¸ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ Ð¾ Ð½Ð¾Ð²Ð¾Ð¹ Ð´Ð»Ñ Ð²Ð°Ñ ÐºÐ½Ð¸Ð³Ð¸.\n\nâ“ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ Ð¸  Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ - Ð—Ð´ÐµÑÑŒ Ð²Ñ‹ ÑƒÐ²Ð¸Ð´Ð¸Ñ‚Ðµ ÑÐ¾Ð²ÐµÑ‚Ñ‹ Ð¿Ð¾ Ñ€ÐµÑˆÐµÐ½Ð¸ÑŽ Ð½Ð°Ð¸Ð±Ð¾Ð»ÐµÐµ Ñ€Ð°ÑÐ¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼, ÑÐ¼Ð¾Ð¶ÐµÑ‚Ðµ ÑÐ°Ð¼Ð¾ÑÑ‚Ð¾ÑÑ‚ÐµÐ»ÑŒÐ½Ð¾ Ð·Ð°Ð´Ð°Ñ‚ÑŒ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ°Ð¼ Ð±Ð¾Ñ‚Ð°, Ð° Ñ‚Ð°ÐºÐ¶Ðµ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶Ð¸Ñ‚ÑŒ ÑÐ²Ð¾Ð¸ Ð¸Ð´ÐµÐ¸ Ð´Ð»Ñ Ñ€Ð°Ð·Ð²Ð¸Ñ‚Ð¸Ñ Ð¸ Ð¿Ñ€Ð¾Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°'
bot = telebot.TeleBot("5131160257:AAF-vANgZy9dmMeRWmlf4_hX5PxqZDzLfN4")

@bot.message_handler(commands = ["start", "help"])
def start(message):
    if message.text == "/start":
        msg = "ÐŸÑ€Ð¸Ð²ÐµÑ‚, " + message.from_user.first_name + "!\nÐ’Ð°Ñ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚ Ð¼Ð½Ð¾Ð³Ð¾Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð±Ð¾Ñ‚-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°Ñ€ÑŒ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ð½ÐµÑ‚ Ð²Ð°ÑˆÐ¸Ð¼ Ð¿Ñ€Ð¾Ð²Ð¾Ð´Ð½Ð¸ÐºÐ¾Ð¼ Ð² Ð¾Ð±ÑˆÐ¸Ñ€Ð½Ð¾Ð¼ Ð¼Ð¸Ñ€Ðµ ÐºÐ½Ð¸Ð³."
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        find = types.KeyboardButton("ðŸ“šÐÐ°Ð¹Ñ‚Ð¸ ÐºÐ½Ð¸Ð³Ñƒ")
        mark = types.KeyboardButton("ðŸŒŸÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ†ÐµÐ½ÐºÑƒ")
        rating = types.KeyboardButton("ðŸ“ŠÐ ÐµÐ¹Ñ‚Ð¸Ð½Ð³")
        rand = types.KeyboardButton("ðŸŽ²Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ð°Ñ ÐºÐ½Ð¸Ð³Ð°")
        help = types.KeyboardButton('â“ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ Ð¸ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ')
        game = types.KeyboardButton('ðŸŽ¯Ð’Ð¸ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð°')
        markup.add(find, mark, rating, rand, game)
        markup.add(help)
        bot.send_message(message.chat.id, msg, reply_markup=markup)
        time.sleep(2)
        bot.send_message(message.chat.id, "Ð§Ñ‚Ð¾ Ñ ÑƒÐ¼ÐµÑŽ?\n\n\n" + command_list + '\n\nÐŸÑ€Ð¸ÑÑ‚Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÑðŸ˜‰')
    if message.text == "/help":
        bot.send_message(message.chat.id, 'Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ñ… Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹:\n\n' + command_list)

@bot.message_handler(content_types=['text'])
def bot_message(message):
    if message.text == "ðŸ“šÐÐ°Ð¹Ñ‚Ð¸ ÐºÐ½Ð¸Ð³Ñƒ" or message.text == "ðŸ”„ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ ÐµÑ‰Ðµ Ñ€Ð°Ð·":
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        push = types.KeyboardButton("Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. ÐŸÑƒÑˆÐºÐ¸Ð½Ð°")
        herz = types.KeyboardButton("Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“ÐµÑ€Ñ†ÐµÐ½Ð°")
        gork = types.KeyboardButton("Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“Ð¾Ñ€ÑŒÐºÐ¾Ð³Ð¾")
        any = types.KeyboardButton("ðŸ›Ð˜ÑÐºÐ°Ñ‚ÑŒ Ð²Ð¾ Ð²ÑÐµÑ… Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°Ñ…")
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(push)
        markup.add(herz)
        markup.add(gork)
        markup.add(any)
        markup.add(back)
        bot.send_message(message.chat.id, "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÑƒ, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð²Ñ‹ Ñ…Ð¾Ñ‚ÐµÐ»Ð¸ Ð±Ñ‹ Ð½Ð°Ð¹Ñ‚Ð¸ ÐºÐ½Ð¸Ð³Ñƒ", reply_markup=markup)
        bot.register_next_step_handler(message, choose_library)
    elif message.text == "âªÐ½Ð°Ð·Ð°Ð´":
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        find = types.KeyboardButton("ðŸ“šÐÐ°Ð¹Ñ‚Ð¸ ÐºÐ½Ð¸Ð³Ñƒ")
        mark = types.KeyboardButton("ðŸŒŸÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ†ÐµÐ½ÐºÑƒ")
        rating = types.KeyboardButton("ðŸ“ŠÐ ÐµÐ¹Ñ‚Ð¸Ð½Ð³")
        rand = types.KeyboardButton("ðŸŽ²Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ð°Ñ ÐºÐ½Ð¸Ð³Ð°")
        help = types.KeyboardButton('â“ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ Ð¸ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ')
        game = types.KeyboardButton('ðŸŽ¯Ð’Ð¸ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð°')
        markup.add(find, mark, rating, rand, game)
        markup.add(help)
        bot.send_message(message.chat.id, "Ð’Ñ‹ ÑÐ½Ð¾Ð²Ð° Ð² Ð³Ð»Ð°Ð²Ð½Ð¾Ð¼ Ð¼ÐµÐ½ÑŽ", reply_markup=markup)
    elif message.text == "ðŸŒŸÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ†ÐµÐ½ÐºÑƒ":
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(back)
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ½Ð¸Ð³Ð¸", reply_markup=markup)
        bot.register_next_step_handler(message, set_rating)
    elif message.text == "ðŸ“ŠÐ ÐµÐ¹Ñ‚Ð¸Ð½Ð³" or message.text == "ðŸ”„Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð´Ñ€ÑƒÐ³ÑƒÑŽ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ":
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        popular = types.KeyboardButton("ðŸ‘¥Ð¡Ð°Ð¼Ñ‹Ðµ Ð¿Ð¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ðµ")
        best = types.KeyboardButton("ðŸŽ–Ð¡Ð°Ð¼Ñ‹Ðµ Ð»ÑƒÑ‡ÑˆÐ¸Ðµ")
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(best, popular, back)
        bot.send_message(message.chat.id, "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ:\n\nðŸŽ–Ð¡Ð°Ð¼Ñ‹Ðµ Ð»ÑƒÑ‡ÑˆÐ¸Ðµ - ÐºÐ½Ð¸Ð³Ð¸ Ñ ÑÐ°Ð¼Ð¾Ð¹ Ð²Ñ‹ÑÐ¾ÐºÐ¾Ð¹ ÑÑ€ÐµÐ´Ð½ÐµÐ¹ Ð¾Ñ†ÐµÐ½ÐºÐ¾Ð¹\n\nðŸ‘¥Ð¡Ð°Ð¼Ñ‹Ðµ Ð¿Ð¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ðµ - ÐºÐ½Ð¸Ð³Ð¸ Ñ ÑÐ°Ð¼Ñ‹Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð¼ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾Ð¼ Ð¾Ñ†ÐµÐ½Ð¾Ðº", reply_markup=markup)
        bot.register_next_step_handler(message, show_rating)
    elif message.text == "ðŸŽ²Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ð°Ñ ÐºÐ½Ð¸Ð³Ð°" or message.text == "ðŸ“–ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²ÑƒÑŽ ÐºÐ½Ð¸Ð³Ñƒ":
        rate = open("rating.txt", encoding='utf-8')
        author_list = []
        name_list = []
        rate_list = []
        cnt_list = []
        for i in range(quantity):
            author, name, rates, cnt = rate.readline().split('"')
            author_list += [author]
            name_list += [name]
            rate_list += [rates]
            cnt_list += [cnt]
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        new_random = types.KeyboardButton("ðŸ“–ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²ÑƒÑŽ ÐºÐ½Ð¸Ð³Ñƒ")
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(new_random, back)
        n = random.randint(0, quantity-1)
        bot.send_message(message.chat.id, "Ð¥Ð¼Ð¼Ð¼Ð¼...ðŸ§\nÐ¯ Ð±Ñ‹ Ð¿Ð¾ÑÐ¾Ð²ÐµÑ‚Ð¾Ð²Ð°Ð» Ð²Ð°Ð¼ Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ ÑÐ»ÐµÐ´ÑƒÑ‰ÑƒÑŽ ÐºÐ½Ð¸Ð³Ñƒ: " + author_list[n] + ", " + name_list[n], reply_markup=markup)
        bot.register_next_step_handler(message, bot_message)
    elif message.text == "ðŸŽ¯Ð’Ð¸ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð°":
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        game = types.KeyboardButton("ðŸŽ®Ð˜Ð³Ñ€Ð°Ñ‚ÑŒ")
        top = types.KeyboardButton("âœ¨Ð¢Ð¾Ð¿ Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²")
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(game, top, back)
        bot.send_message(message.chat.id, "Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ñ€Ð°Ð·Ð´ÐµÐ» Ð²Ð¸ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð°! Ð—Ð´ÐµÑÑŒ Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ñ€Ð¾Ð¹Ñ‚Ð¸ Ñ‚ÐµÑÑ‚ Ð¸Ð· 10 Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð², Ð³Ð´Ðµ Ð²Ð°Ð¼ Ð±ÑƒÐ´ÐµÑ‚ Ð½ÐµÐ¾Ð±Ð¾Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ ÐºÐ½Ð¸Ð³Ñƒ Ð¿Ð¾ ÐµÐµ ÐºÑ€Ð°Ñ‚ÐºÐ¾Ð¼Ñƒ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸ÑŽ. \n\nÐ’Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ! Ð’Ñ‹ Ð½Ðµ ÑÐ¼Ð¾Ð¶ÐµÑ‚Ðµ Ð²Ñ‹Ð¹Ñ‚Ð¸ Ð² Ð³Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ, Ð¿Ð¾ÐºÐ° Ð½Ðµ Ð¿Ñ€Ð¾Ð¹Ð´ÐµÑ‚Ðµ Ñ‚ÐµÑÑ‚ Ð´Ð¾ ÐºÐ¾Ð½Ñ†Ð°!", reply_markup=markup)
        bot.register_next_step_handler(message, game1)
    elif message.text == "â“ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ Ð¸ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ":
        bot.send_message(message.chat.id, "Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð·Ð°Ð´Ð°Ñ‚ÑŒ ÐºÐ°ÐºÐ¾Ð¹-Ñ‚Ð¾ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ°Ð¼, Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ ÑÑ‚Ð¾ Ð² Ð½Ð°ÑˆÐµÐ¼ Ñ‚ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼-ÐºÐ°Ð½Ð°Ð»Ðµ: https://t.me/mpo_LibraryBot")

def choose_library(message):
    global name_list, author_list, date_list
    if message.text == "âªÐ½Ð°Ð·Ð°Ð´":
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        find = types.KeyboardButton("ðŸ“šÐÐ°Ð¹Ñ‚Ð¸ ÐºÐ½Ð¸Ð³Ñƒ")
        mark = types.KeyboardButton("ðŸŒŸÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ†ÐµÐ½ÐºÑƒ")
        rating = types.KeyboardButton("ðŸ“ŠÐ ÐµÐ¹Ñ‚Ð¸Ð½Ð³")
        rand = types.KeyboardButton("ðŸŽ²Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ð°Ñ ÐºÐ½Ð¸Ð³Ð°")
        help = types.KeyboardButton('â“ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ Ð¸ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ')
        game = types.KeyboardButton('ðŸŽ¯Ð’Ð¸ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð°')
        markup.add(find, mark, rating, rand, game)
        markup.add(help)
        bot.send_message(message.chat.id, "Ð’Ñ‹ ÑÐ½Ð¾Ð²Ð° Ð² Ð³Ð»Ð°Ð²Ð½Ð¾Ð¼ Ð¼ÐµÐ½ÑŽ", reply_markup=markup)
    elif message.text == "Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. ÐŸÑƒÑˆÐºÐ¸Ð½Ð°":
        biblio = codecs.open("biblio_pushkin.txt", encoding='utf-8')
        author_list = []
        name_list = []
        date_list = []
        for i in range(quantity):
            author, name, date = biblio.readline().split('"')
            author_list += [author]
            name_list += [name]
            date_list += [date]
        k = 0
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(back)
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ½Ð¸Ð³Ð¸, Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ð¸ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð²Ñ‹ Ñ…Ð¾Ñ‚ÐµÐ»Ð¸ Ð±Ñ‹ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ", reply_markup=markup)
        bot.register_next_step_handler(message, get_book_pushkin)

    elif message.text == "Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“ÐµÑ€Ñ†ÐµÐ½Ð°":
        biblio = codecs.open("biblio_herzen.txt", encoding='utf-8')
        author_list = []
        name_list = []
        date_list = []
        for i in range(quantity):
            author, name, date = biblio.readline().split('"')
            author_list += [author]
            name_list += [name]
            date_list += [date]
        k = 0
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(back)
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ½Ð¸Ð³Ð¸, Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ð¸ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð²Ñ‹ Ñ…Ð¾Ñ‚ÐµÐ»Ð¸ Ð±Ñ‹ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ", reply_markup=markup)
        bot.register_next_step_handler(message, get_book_herzen)

    elif message.text == "Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“Ð¾Ñ€ÑŒÐºÐ¾Ð³Ð¾":
        biblio = codecs.open("biblio_gorkov.txt", encoding='utf-8')
        author_list = []
        name_list = []
        date_list = []
        for i in range(quantity):
            author, name, date = biblio.readline().split('"')
            author_list += [author]
            name_list += [name]
            date_list += [date]
        k = 0
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(back)
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ½Ð¸Ð³Ð¸, Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ð¸ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð²Ñ‹ Ñ…Ð¾Ñ‚ÐµÐ»Ð¸ Ð±Ñ‹ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ", reply_markup=markup)
        bot.register_next_step_handler(message, get_book_gorkov)

    elif message.text == "ðŸ›Ð˜ÑÐºÐ°Ñ‚ÑŒ Ð²Ð¾ Ð²ÑÐµÑ… Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°Ñ…":
        k = 0
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(back)
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ½Ð¸Ð³Ð¸, Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ð¸ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð²Ñ‹ Ñ…Ð¾Ñ‚ÐµÐ»Ð¸ Ð±Ñ‹ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ", reply_markup=markup)
        bot.register_next_step_handler(message, get_book_all)


def get_book_pushkin(message):
    for i in range(quantity):
        if message.text == "âªÐ½Ð°Ð·Ð°Ð´":
            markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
            push = types.KeyboardButton("Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. ÐŸÑƒÑˆÐºÐ¸Ð½Ð°")
            herz = types.KeyboardButton("Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“ÐµÑ€Ñ†ÐµÐ½Ð°")
            gork = types.KeyboardButton("Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“Ð¾Ñ€ÑŒÐºÐ¾Ð³Ð¾")
            any = types.KeyboardButton("ðŸ›Ð˜ÑÐºÐ°Ñ‚ÑŒ Ð²Ð¾ Ð²ÑÐµÑ… Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°Ñ…")
            back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
            markup.add(push)
            markup.add(herz)
            markup.add(gork)
            markup.add(any)
            markup.add(back)
            bot.send_message(message.chat.id, "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÑƒ, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð²Ñ‹ Ñ…Ð¾Ñ‚ÐµÐ»Ð¸ Ð±Ñ‹ Ð½Ð°Ð¹Ñ‚Ð¸ ÐºÐ½Ð¸Ð³Ñƒ", reply_markup=markup)
            bot.register_next_step_handler(message, choose_library)
            k = 0
            break
        elif name_list[i].count(message.text) > 0 and date_list[i].count("-") == 1:
            markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
            again = types.KeyboardButton("ðŸ”„ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ ÐµÑ‰Ðµ Ñ€Ð°Ð·")
            back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
            markup.add(again, back)
            bot.send_message(message.chat.id, 'Ð¡ÐºÐ¾Ñ€ÐµÐµ Ð²ÑÐµÐ³Ð¾ Ð²Ñ‹ Ð¸Ñ‰ÐµÑ‚Ðµ ÐºÐ½Ð¸Ð³Ñƒ: ' + author_list[i] + ", " + name_list[i] + '\n' + "Ð­Ñ‚Ð° ÐºÐ½Ð¸Ð³Ð° ÐµÑÑ‚ÑŒ Ð² Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐµ Ð¸Ð¼. ÐŸÑƒÑˆÐºÐ¸Ð½Ð°, Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ñ€Ð¸Ð¹Ñ‚Ð¸ Ð¸ Ð·Ð°Ð±Ñ€Ð°Ñ‚ÑŒ ÐµÐµ\n\n" + if_not_book, reply_markup=markup)
            bot.register_next_step_handler(message, bot_message)
            k = 0
            break
        elif name_list[i].count(message.text) > 0:
            markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
            again = types.KeyboardButton("ðŸ”„ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ ÐµÑ‰Ðµ Ñ€Ð°Ð·")
            back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
            markup.add(again, back)
            bot.send_message(message.chat.id, 'Ð¡ÐºÐ¾Ñ€ÐµÐµ Ð²ÑÐµÐ³Ð¾ Ð²Ñ‹ Ð¸Ñ‰ÐµÑ‚Ðµ ÐºÐ½Ð¸Ð³Ñƒ: ' + author_list[i] + ", " + name_list[i] + '\n' + "Ð­Ñ‚Ñƒ ÐºÐ½Ð¸Ð³Ñƒ ÑÐµÐ¹Ñ‡Ð°Ñ Ð·Ð°Ð±Ñ€Ð°Ð»Ð¸, ÐºÑ€Ð°Ð¹Ð½Ð¸Ð¹ ÑÑ€Ð¾Ðº ÐµÐµ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ð° - " + date_list[i] + "\n\n" + if_not_book, reply_markup=markup)
            bot.register_next_step_handler(message, bot_message)
            k = 0
            break
        else:
            k = 1
    if k == 1:
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        again = types.KeyboardButton("ðŸ”„ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ ÐµÑ‰Ðµ Ñ€Ð°Ð·")
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(again, back)
        bot.send_message(message.chat.id, "ÐšÐ½Ð¸Ð³Ð¸ Ñ Ñ‚Ð°ÐºÐ¸Ð¼ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð² Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐµ Ð¸Ð¼. ÐŸÑƒÑˆÐºÐ¸Ð½Ð° Ð½ÐµÑ‚", reply_markup=markup)
        bot.register_next_step_handler(message, bot_message)

def get_book_herzen(message):
    for i in range(quantity):
        if message.text == "âªÐ½Ð°Ð·Ð°Ð´":
            markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
            push = types.KeyboardButton("Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. ÐŸÑƒÑˆÐºÐ¸Ð½Ð°")
            herz = types.KeyboardButton("Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“ÐµÑ€Ñ†ÐµÐ½Ð°")
            gork = types.KeyboardButton("Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“Ð¾Ñ€ÑŒÐºÐ¾Ð³Ð¾")
            any = types.KeyboardButton("ðŸ›Ð˜ÑÐºÐ°Ñ‚ÑŒ Ð²Ð¾ Ð²ÑÐµÑ… Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°Ñ…")
            back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
            markup.add(push)
            markup.add(herz)
            markup.add(gork)
            markup.add(any)
            markup.add(back)
            bot.send_message(message.chat.id, "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÑƒ, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð²Ñ‹ Ñ…Ð¾Ñ‚ÐµÐ»Ð¸ Ð±Ñ‹ Ð½Ð°Ð¹Ñ‚Ð¸ ÐºÐ½Ð¸Ð³Ñƒ", reply_markup=markup)
            bot.register_next_step_handler(message, choose_library)
            k = 0
            break
        elif name_list[i].count(message.text) > 0 and date_list[i].count("-") == 1:
            markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
            again = types.KeyboardButton("ðŸ”„ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ ÐµÑ‰Ðµ Ñ€Ð°Ð·")
            back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
            markup.add(again, back)
            bot.send_message(message.chat.id, 'Ð¡ÐºÐ¾Ñ€ÐµÐµ Ð²ÑÐµÐ³Ð¾ Ð²Ñ‹ Ð¸Ñ‰ÐµÑ‚Ðµ ÐºÐ½Ð¸Ð³Ñƒ: ' + author_list[i] + ", " + name_list[i] + '\n' + "Ð­Ñ‚Ð° ÐºÐ½Ð¸Ð³Ð° ÐµÑÑ‚ÑŒ Ð² Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐµ Ð¸Ð¼. Ð“ÐµÑ€Ñ†ÐµÐ½Ð°, Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ñ€Ð¸Ð¹Ñ‚Ð¸ Ð¸ Ð·Ð°Ð±Ñ€Ð°Ñ‚ÑŒ ÐµÐµ\n\n" + if_not_book,reply_markup=markup)
            bot.register_next_step_handler(message, bot_message)
            k = 0
            break
        elif name_list[i].count(message.text) > 0:
            markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
            again = types.KeyboardButton("ðŸ”„ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ ÐµÑ‰Ðµ Ñ€Ð°Ð·")
            back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
            markup.add(again, back)
            bot.send_message(message.chat.id, 'Ð¡ÐºÐ¾Ñ€ÐµÐµ Ð²ÑÐµÐ³Ð¾ Ð²Ñ‹ Ð¸Ñ‰ÐµÑ‚Ðµ ÐºÐ½Ð¸Ð³Ñƒ: ' + author_list[i] + ", " + name_list[i] + '\n' + "Ð­Ñ‚Ñƒ ÐºÐ½Ð¸Ð³Ñƒ ÑÐµÐ¹Ñ‡Ð°Ñ Ð·Ð°Ð±Ñ€Ð°Ð»Ð¸, ÐºÑ€Ð°Ð¹Ð½Ð¸Ð¹ ÑÑ€Ð¾Ðº ÐµÐµ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ð° - " + date_list[i] + "\n\n" + if_not_book, reply_markup=markup)
            bot.register_next_step_handler(message, bot_message)
            k = 0
            break
        else:
            k = 1
    if k == 1:
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        again = types.KeyboardButton("ðŸ”„ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ ÐµÑ‰Ðµ Ñ€Ð°Ð·")
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(again, back)
        bot.send_message(message.chat.id, "ÐšÐ½Ð¸Ð³Ð¸ Ñ Ñ‚Ð°ÐºÐ¸Ð¼ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð² Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐµ Ð¸Ð¼. Ð“ÐµÑ€Ñ†ÐµÐ½Ð° Ð½ÐµÑ‚", reply_markup=markup)
        bot.register_next_step_handler(message, bot_message)

def get_book_gorkov(message):
    for i in range(quantity):
        if message.text == "âªÐ½Ð°Ð·Ð°Ð´":
            markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
            push = types.KeyboardButton("Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. ÐŸÑƒÑˆÐºÐ¸Ð½Ð°")
            herz = types.KeyboardButton("Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“ÐµÑ€Ñ†ÐµÐ½Ð°")
            gork = types.KeyboardButton("Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“Ð¾Ñ€ÑŒÐºÐ¾Ð³Ð¾")
            any = types.KeyboardButton("ðŸ›Ð˜ÑÐºÐ°Ñ‚ÑŒ Ð²Ð¾ Ð²ÑÐµÑ… Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°Ñ…")
            back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
            markup.add(push)
            markup.add(herz)
            markup.add(gork)
            markup.add(any)
            markup.add(back)
            bot.send_message(message.chat.id, "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÑƒ, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð²Ñ‹ Ñ…Ð¾Ñ‚ÐµÐ»Ð¸ Ð±Ñ‹ Ð½Ð°Ð¹Ñ‚Ð¸ ÐºÐ½Ð¸Ð³Ñƒ", reply_markup=markup)
            bot.register_next_step_handler(message, choose_library)
            k = 0
            break
        elif name_list[i].count(message.text) > 0 and date_list[i].count("-") == 1:
            markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
            again = types.KeyboardButton("ðŸ”„ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ ÐµÑ‰Ðµ Ñ€Ð°Ð·")
            back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
            markup.add(again, back)
            bot.send_message(message.chat.id, 'Ð¡ÐºÐ¾Ñ€ÐµÐµ Ð²ÑÐµÐ³Ð¾ Ð²Ñ‹ Ð¸Ñ‰ÐµÑ‚Ðµ ÐºÐ½Ð¸Ð³Ñƒ: ' + author_list[i] + ", " + name_list[i] + '\n' + "Ð­Ñ‚Ð° ÐºÐ½Ð¸Ð³Ð° ÐµÑÑ‚ÑŒ Ð² Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐµ Ð¸Ð¼. Ð“Ð¾Ñ€ÑŒÐºÐ¾Ð³Ð¾, Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ñ€Ð¸Ð¹Ñ‚Ð¸ Ð¸ Ð·Ð°Ð±Ñ€Ð°Ñ‚ÑŒ ÐµÐµ\n\n" + if_not_book,reply_markup=markup)
            bot.register_next_step_handler(message, bot_message)
            k = 0
            break
        elif name_list[i].count(message.text) > 0:
            markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
            again = types.KeyboardButton("ðŸ”„ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ ÐµÑ‰Ðµ Ñ€Ð°Ð·")
            back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
            markup.add(again, back)
            bot.send_message(message.chat.id, 'Ð¡ÐºÐ¾Ñ€ÐµÐµ Ð²ÑÐµÐ³Ð¾ Ð²Ñ‹ Ð¸Ñ‰ÐµÑ‚Ðµ ÐºÐ½Ð¸Ð³Ñƒ: ' + author_list[i] + ", " + name_list[i] + '\n' + "Ð­Ñ‚Ñƒ ÐºÐ½Ð¸Ð³Ñƒ ÑÐµÐ¹Ñ‡Ð°Ñ Ð·Ð°Ð±Ñ€Ð°Ð»Ð¸, ÐºÑ€Ð°Ð¹Ð½Ð¸Ð¹ ÑÑ€Ð¾Ðº ÐµÐµ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ð° - " + date_list[i] + "\n\n" + if_not_book, reply_markup=markup)
            bot.register_next_step_handler(message, bot_message)
            k = 0
            break
        else:
            k = 1
    if k == 1:
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        again = types.KeyboardButton("ðŸ”„ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ ÐµÑ‰Ðµ Ñ€Ð°Ð·")
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(again, back)
        bot.send_message(message.chat.id, "ÐšÐ½Ð¸Ð³Ð¸ Ñ Ñ‚Ð°ÐºÐ¸Ð¼ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð² Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐµ Ð¸Ð¼. Ð“Ð¾Ñ€ÑŒÐºÐ¾Ð³Ð¾ Ð½ÐµÑ‚", reply_markup=markup)
        bot.register_next_step_handler(message, bot_message)


def get_book_all(message):
    biblio1 = codecs.open("biblio_pushkin.txt", encoding='utf-8')
    biblio2 = codecs.open("biblio_herzen.txt", encoding='utf-8')
    biblio3 = codecs.open("biblio_gorkov.txt", encoding='utf-8')
    author_list_push = []
    name_list_push = []
    date_list_push = []
    author_list_herz = []
    name_list_herz = []
    date_list_herz = []
    author_list_gork = []
    name_list_gork = []
    date_list_gork = []
    for i in range(quantity):
        author, name, date = biblio1.readline().split('"')
        author_list_push += [author]
        name_list_push += [name]
        date_list_push += [date]
    for i in range(quantity):
        author, name, date = biblio2.readline().split('"')
        author_list_herz += [author]
        name_list_herz += [name]
        date_list_herz += [date]
    for i in range(quantity):
        author, name, date = biblio3.readline().split('"')
        author_list_gork += [author]
        name_list_gork += [name]
        date_list_gork += [date]
    msg = ''
    if message.text == "âªÐ½Ð°Ð·Ð°Ð´":
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        push = types.KeyboardButton("Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. ÐŸÑƒÑˆÐºÐ¸Ð½Ð°")
        herz = types.KeyboardButton("Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“ÐµÑ€Ñ†ÐµÐ½Ð°")
        gork = types.KeyboardButton("Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“Ð¾Ñ€ÑŒÐºÐ¾Ð³Ð¾")
        any = types.KeyboardButton("ðŸ›Ð˜ÑÐºÐ°Ñ‚ÑŒ Ð²Ð¾ Ð²ÑÐµÑ… Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°Ñ…")
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(push)
        markup.add(herz)
        markup.add(gork)
        markup.add(any)
        markup.add(back)
        bot.send_message(message.chat.id, "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÑƒ, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð²Ñ‹ Ñ…Ð¾Ñ‚ÐµÐ»Ð¸ Ð±Ñ‹ Ð½Ð°Ð¹Ñ‚Ð¸ ÐºÐ½Ð¸Ð³Ñƒ", reply_markup=markup)
        bot.register_next_step_handler(message, choose_library)
    else:
        for i in range(quantity):
            if name_list_push[i].count(message.text) > 0 and date_list_push[i].count("-") == 1:
                msg += 'Ð¡ÐºÐ¾Ñ€ÐµÐµ Ð²ÑÐµÐ³Ð¾ Ð²Ñ‹ Ð¸Ñ‰ÐµÑ‚Ðµ ÐºÐ½Ð¸Ð³Ñƒ: ' + author_list_push[i] + ", " + name_list_push[i] + '\n\n\n â€¢Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. ÐŸÑƒÑˆÐºÐ¸Ð½Ð°: \n' + "  Ð­Ñ‚Ð° ÐºÐ½Ð¸Ð³Ð° ÐµÑÑ‚ÑŒ Ð² Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐµ, Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ñ€Ð¸Ð¹Ñ‚Ð¸ Ð¸ Ð·Ð°Ð±Ñ€Ð°Ñ‚ÑŒ ÐµÐµ\n\n"
                k = 0
                break
            elif name_list_push[i].count(message.text) > 0:
                msg += 'Ð¡ÐºÐ¾Ñ€ÐµÐµ Ð²ÑÐµÐ³Ð¾ Ð²Ñ‹ Ð¸Ñ‰ÐµÑ‚Ðµ ÐºÐ½Ð¸Ð³Ñƒ: ' + author_list_push[i] + ", " + name_list_push[i] + '\n\n\n â€¢Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. ÐŸÑƒÑˆÐºÐ¸Ð½Ð°: \n' + "  Ð­Ñ‚Ñƒ ÐºÐ½Ð¸Ð³Ñƒ ÑÐµÐ¹Ñ‡Ð°Ñ Ð·Ð°Ð±Ñ€Ð°Ð»Ð¸, ÐºÑ€Ð°Ð¹Ð½Ð¸Ð¹ ÑÑ€Ð¾Ðº ÐµÐµ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ð° - " + date_list_push[i] + "\n\n"
                k = 0
                break
            else:
                k = 1
        if k == 1:
            msg += 'Ð¡ÐºÐ¾Ñ€ÐµÐµ Ð²ÑÐµÐ³Ð¾ Ð²Ñ‹ Ð¸Ñ‰ÐµÑ‚Ðµ ÐºÐ½Ð¸Ð³Ñƒ: ' + "Ð½ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾"+ '\n\n\n â€¢Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. ÐŸÑƒÑˆÐºÐ¸Ð½Ð°: \n' + "  ÐšÐ½Ð¸Ð³Ð¸ Ñ Ñ‚Ð°ÐºÐ¸Ð¼ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð² Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐµ Ð½ÐµÑ‚\n\n"
        k = 1
        for i in range(quantity):
            if name_list_herz[i].count(message.text) > 0 and date_list_herz[i].count("-") == 1:
                msg += 'â€¢Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“ÐµÑ€Ñ†ÐµÐ½Ð°: \n' + "  Ð­Ñ‚Ð° ÐºÐ½Ð¸Ð³Ð° ÐµÑÑ‚ÑŒ Ð² Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐµ, Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ñ€Ð¸Ð¹Ñ‚Ð¸ Ð¸ Ð·Ð°Ð±Ñ€Ð°Ñ‚ÑŒ ÐµÐµ\n\n"
                k = 0
                break
            elif name_list_herz[i].count(message.text) > 0:
                msg += 'â€¢Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“ÐµÑ€Ñ†ÐµÐ½Ð°: \n' + "  Ð­Ñ‚Ñƒ ÐºÐ½Ð¸Ð³Ñƒ ÑÐµÐ¹Ñ‡Ð°Ñ Ð·Ð°Ð±Ñ€Ð°Ð»Ð¸, ÐºÑ€Ð°Ð¹Ð½Ð¸Ð¹ ÑÑ€Ð¾Ðº ÐµÐµ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ð° - " + date_list_herz[i] + "\n"
                k = 0
                break
            else:
                k = 1
        if k == 1:
            msg += 'â€¢Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“ÐµÑ€Ñ†ÐµÐ½Ð°: \n' + "  ÐšÐ½Ð¸Ð³Ð¸ Ñ Ñ‚Ð°ÐºÐ¸Ð¼ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð² Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐµ Ð½ÐµÑ‚\n\n"
        k = 1
        for i in range(quantity):
            if name_list_gork[i].count(message.text) > 0 and date_list_gork[i].count("-") == 1:
                msg += 'â€¢Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“Ð¾Ñ€ÑŒÐºÐ¾Ð³Ð¾: \n' + "  Ð­Ñ‚Ð° ÐºÐ½Ð¸Ð³Ð° ÐµÑÑ‚ÑŒ Ð² Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐµ, Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ñ€Ð¸Ð¹Ñ‚Ð¸ Ð¸ Ð·Ð°Ð±Ñ€Ð°Ñ‚ÑŒ ÐµÐµ\n\n\n"
                k = 0
                break
            elif name_list_gork[i].count(message.text) > 0:
                msg += 'â€¢Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“Ð¾Ñ€ÑŒÐºÐ¾Ð³Ð¾: \n' + "  Ð­Ñ‚Ñƒ ÐºÐ½Ð¸Ð³Ñƒ ÑÐµÐ¹Ñ‡Ð°Ñ Ð·Ð°Ð±Ñ€Ð°Ð»Ð¸, ÐºÑ€Ð°Ð¹Ð½Ð¸Ð¹ ÑÑ€Ð¾Ðº ÐµÐµ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ð° - " + date_list_gork[i] + "\n\n\n"
                k = 0
                break
            else:
                k = 1
        if k == 1:
            msg += 'â€¢Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð¸Ð¼. Ð“Ð¾Ñ€ÑŒÐºÐ¾Ð³Ð¾: \n' + "  ÐšÐ½Ð¸Ð³Ð¸ Ñ Ñ‚Ð°ÐºÐ¸Ð¼ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð² Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐµ Ð½ÐµÑ‚\n\n\n"

        msg += if_not_book

        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        again = types.KeyboardButton("ðŸ”„ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ ÐµÑ‰Ðµ Ñ€Ð°Ð·")
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(again, back)
        bot.send_message(message.chat.id, msg, reply_markup=markup)
        bot.register_next_step_handler(message, bot_message)

@bot.message_handler()
def show_rating(message):
    rate = open("rating.txt", encoding='utf-8')
    author_rate_list = []
    name_rate_list = []
    rate_rate_list = []
    cnt_rate_list = []
    for i in range(quantity):
        author, name, rates, cnt = rate.readline().split('"')
        author_rate_list += [author]
        name_rate_list += [name]
        rate_rate_list += [rates]
        cnt_rate_list += [cnt]
    if message.text == "ðŸŽ–Ð¡Ð°Ð¼Ñ‹Ðµ Ð»ÑƒÑ‡ÑˆÐ¸Ðµ":
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        another = types.KeyboardButton("ðŸ”„Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð´Ñ€ÑƒÐ³ÑƒÑŽ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ")
        markup.add(another)
        average_marks = []
        msg = ""
        for i in range(quantity):
            average_marks += [round(int(rate_rate_list[i]) / int(cnt_rate_list[i]), 2)]
        top_list = list(sorted(average_marks)[::-1])
        for i in range(10):
            for j in range(quantity):
                if top_list[i] == average_marks[j]:
                    msg += str(i + 1) + " Ð¼ÐµÑÑ‚Ð¾ - " + author_rate_list[j] + ", " + name_rate_list[j] + " - ÑÑ€ÐµÐ´Ð½ÑÑ Ð¾Ñ†ÐµÐ½ÐºÐ°: " + str(average_marks[j]) + "\n\n"
                    average_marks[j] = -9999
                    break
        bot.send_message(message.chat.id, "Ð¢ÐžÐŸ - 10 ÐºÐ½Ð¸Ð³:\n" + msg, reply_markup=markup)
        bot.register_next_step_handler(message, bot_message)

    if message.text == "ðŸ‘¥Ð¡Ð°Ð¼Ñ‹Ðµ Ð¿Ð¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ðµ":
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        another = types.KeyboardButton("ðŸ”„Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð´Ñ€ÑƒÐ³ÑƒÑŽ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ")
        markup.add(another)
        save = []
        msg = ""
        for i in range(quantity):
            save += [cnt_rate_list[i]]
        top_list = list(sorted(cnt_rate_list)[::-1])
        for i in range(10):
            for j in range(quantity):
                if top_list[i] == cnt_rate_list[j]:
                    msg += str(i + 1) + " Ð¼ÐµÑÑ‚Ð¾ - " + author_rate_list[j] + ", " + name_rate_list[j] + " -  Ð²ÑÐµÐ³Ð¾ Ð¾Ñ†ÐµÐ½Ð¾Ðº: " + str(cnt_rate_list[j]) + "\n"
                    cnt_rate_list[j] = -9999
                    break
        for i in range(quantity):
            cnt_rate_list[i] = save[i]
        bot.send_message(message.chat.id, "Ð¢ÐžÐŸ - 10 ÐºÐ½Ð¸Ð³:\n" + msg, reply_markup=markup)
        bot.register_next_step_handler(message, bot_message)
    if message.text == "âªÐ½Ð°Ð·Ð°Ð´":
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        find = types.KeyboardButton("ðŸ“šÐÐ°Ð¹Ñ‚Ð¸ ÐºÐ½Ð¸Ð³Ñƒ")
        mark = types.KeyboardButton("ðŸŒŸÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ†ÐµÐ½ÐºÑƒ")
        rating = types.KeyboardButton("ðŸ“ŠÐ ÐµÐ¹Ñ‚Ð¸Ð½Ð³")
        rand = types.KeyboardButton("ðŸŽ²Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ð°Ñ ÐºÐ½Ð¸Ð³Ð°")
        help = types.KeyboardButton('â“ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ Ð¸ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ')
        game = types.KeyboardButton('ðŸŽ¯Ð’Ð¸ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð°')
        markup.add(find, mark, rating, rand, game)
        markup.add(help)
        bot.send_message(message.chat.id, "Ð’Ñ‹ ÑÐ½Ð¾Ð²Ð° Ð² Ð³Ð»Ð°Ð²Ð½Ð¾Ð¼ Ð¼ÐµÐ½ÑŽ", reply_markup=markup)

@bot.message_handler()
def set_rating(message):
    global i
    rate = open("rating.txt", encoding='utf-8')
    author_list = []
    name_list = []
    rate_list = []
    cnt_list = []
    for i in range(quantity):
        author, name, rates, cnt = rate.readline().split('"')
        author_list += [author]
        name_list += [name]
        rate_list += [rates]
        cnt_list += [cnt]
    for i in range(quantity):
        if message.text == "âªÐ½Ð°Ð·Ð°Ð´":
            markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
            find = types.KeyboardButton("ðŸ“šÐÐ°Ð¹Ñ‚Ð¸ ÐºÐ½Ð¸Ð³Ñƒ")
            mark = types.KeyboardButton("ðŸŒŸÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ†ÐµÐ½ÐºÑƒ")
            rating = types.KeyboardButton("ðŸ“ŠÐ ÐµÐ¹Ñ‚Ð¸Ð½Ð³")
            rand = types.KeyboardButton("ðŸŽ²Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ð°Ñ ÐºÐ½Ð¸Ð³Ð°")
            help = types.KeyboardButton('â“ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ Ð¸ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ')
            game = types.KeyboardButton('ðŸŽ¯Ð’Ð¸ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð°')
            markup.add(find, mark, rating, rand, game)
            markup.add(help)
            bot.send_message(message.chat.id, "Ð’Ñ‹ ÑÐ½Ð¾Ð²Ð° Ð² Ð³Ð»Ð°Ð²Ð½Ð¾Ð¼ Ð¼ÐµÐ½ÑŽ", reply_markup=markup)
            k = 0
            break
        elif name_list[i].count(message.text) > 0:
            markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
            back = types.KeyboardButton("âªÐ¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ½Ð¸Ð³Ð¸")
            one = types.KeyboardButton("1")
            two = types.KeyboardButton("2")
            three = types.KeyboardButton("3")
            four = types.KeyboardButton("4")
            five = types.KeyboardButton("5")
            markup.add(one, two, three, four, five)
            markup.add(back)
            bot.send_message(message.chat.id, 'Ð¡ÐºÐ¾Ñ€ÐµÐµ Ð²ÑÐµÐ³Ð¾ Ð²Ñ‹ Ð¸Ñ‰Ð¸Ñ‚Ðµ ÐºÐ½Ð¸Ð³Ñƒ: "' + author_list[i] + ", " + name_list[i] + '"\n' + "Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÑƒ Ð¾Ñ†ÐµÐ½ÐºÑƒ, Ð¾Ñ‚ 1 Ð´Ð¾ 5\n\n" + if_not_book, reply_markup=markup)
            bot.register_next_step_handler(message, set_mark)
            k = 0
            break
        else:
            k = 1
    if k == 1:
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        again = types.KeyboardButton("Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð´Ñ€ÑƒÐ³ÑƒÑŽ ÐºÐ½Ð¸Ð³Ñƒ")
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(again, back)
        bot.send_message(message.chat.id, "ÐšÐ½Ð¸Ð³Ð¸ Ñ Ñ‚Ð°ÐºÐ¸Ð¼ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð² Ð½Ð°ÑˆÐµÐ¹ Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð½ÐµÑ‚. Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾, Ð¾Ð½Ð° Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ Ð² Ð±ÑƒÐ´ÑƒÑ‰ÐµÐ¼", reply_markup=markup)
        bot.register_next_step_handler(message, bot_message)

@bot.message_handler()
def set_mark(message):
    global i
    rate = open("rating.txt", encoding='utf-8')
    author_list = []
    name_list = []
    rate_list = []
    cnt_list = []
    for j in range(quantity):
        author, name, rates, cnt = rate.readline().split('"')
        author_list += [author]
        name_list += [name]
        rate_list += [int(rates)]
        cnt_list += [int(cnt)]
    if message.text == "âªÐ¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ½Ð¸Ð³Ð¸":
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(back)
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ½Ð¸Ð³Ð¸", reply_markup=markup)
        bot.register_next_step_handler(message, set_rating)

    else:
        if message.text == "1" or message.text == "2" or message.text == "3" or message.text == "4" or message.text == "5":
            markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
            back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
            markup.add(back)
            rate_list[i] += int(message.text)
            cnt_list[i] += 1
            bot.send_message(message.from_user.id, "Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾ Ð·Ð° Ð²Ð°ÑˆÑƒ Ð¾Ñ†ÐµÐ½ÐºÑƒ ", reply_markup=markup)
            rate = codecs.open("rating.txt", "w+", encoding='utf-8')
            msg = []
            for i in range(quantity):
                msg += [author_list[i] + '"' + name_list[i] + '"' + str(rate_list[i]) + '"' + str(cnt_list[i]) + '\n']
            rate.writelines(msg)
            bot.register_next_step_handler(message, bot_message)
        else:
            bot.send_message(message.from_user.id, "ÐÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð²Ð²Ð¾Ð´Ð°. ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð° Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ‡Ð¸ÑÐ»Ð¾ Ð¾Ñ‚ 1 Ð´Ð¾ 5")
            bot.register_next_step_handler(message, set_mark)

@bot.message_handler()
def game1(message):
    global rez
    f = codecs.open("game.txt", encoding = 'utf-8')
    string = f.readlines()
    names = []
    rezults = []
    users = []
    for i in string:
        name, id, rezult = i.split('"')
        names += [name]
        users += [int(id)]
        rezults += [int(rezult)]
    first_time = True
    for i in users:
        if i == message.chat.id:
            first_time = False
    if message.text == "ðŸŽ®Ð˜Ð³Ñ€Ð°Ñ‚ÑŒ" and first_time:
        rez = 0
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        ans1 = types.KeyboardButton("Ð“Ð¾Ñ€Ðµ Ð¾Ñ‚ ÑƒÐ¼Ð°, Ð.Ð¡. Ð“Ñ€Ð¸Ð±Ð¾ÐµÐ´Ð¾Ð²")
        ans2 = types.KeyboardButton("ÐžÐ±Ð»Ð¾Ð¼Ð¾Ð², Ð˜. Ð“Ð¾Ð½Ñ‡Ð°Ñ€Ð¾Ð²")
        ans3 = types.KeyboardButton("Ð¡Ñ‚Ð¾ Ð»ÐµÑ‚ Ð¾Ð´Ð¸Ð½Ð¾Ñ‡ÐµÑÑ‚Ð²Ð°, Ðœ. Ð“Ð°Ñ€ÑÐ¸Ñ")
        markup.add(ans1)
        markup.add(ans2)
        markup.add(ans3)
        bot.send_message(message.chat.id, "Ð Ð¾Ð¼Ð°Ð½ Ð¾ Ñ‚Ð¾Ð¼, ÐºÐ°Ðº Ð¿Ñ€Ð¾ÐºÑ€Ð°ÑÑ‚Ð¸Ð½Ð°Ñ†Ð¸Ñ Ð²Ð»Ð¸ÑÐµÑ‚ Ð½Ð° Ð¼Ð¾Ð»Ð¾Ð´Ð¾Ð³Ð¾ Ð±Ð°Ñ€Ð¸Ð½Ð° Ð¸ Ð¾Ñ‚Ð±Ð¸Ð²Ð°ÐµÑ‚ Ñƒ Ð½ÐµÐ³Ð¾ Ð¶ÐµÐ»Ð°Ð½Ð¸Ðµ Ð·Ð°Ð½Ð¸Ð¼Ð°Ñ‚ÑŒÑÑ Â«Ð±Ð¸Ð·Ð½ÐµÑÐ¾Ð¼Â», Ð¿ÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸ Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ½ÑŒÐºÐ¾Ð¹ Ð¾ÑÐ¾Ð±Ðµ.", reply_markup=markup)
        bot.register_next_step_handler(message, game2)
    elif message.text == "ðŸŽ®Ð˜Ð³Ñ€Ð°Ñ‚ÑŒ":
        bot.send_message(message.chat.id, "Ð˜Ð·Ð²Ð¸Ð½Ð¸Ñ‚Ðµ, Ð½Ð¾ Ð²Ñ‹ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ Ñ‚ÐµÑÑ‚ Ð´Ð²Ð°Ð¶Ð´Ñ‹. ÐÐµ Ð±ÐµÑÐ¿Ð¾ÐºÐ¾Ð¹Ñ‚ÐµÑÑŒ, Ð²Ð°Ñˆ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð±Ñ‹Ð» ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½.")
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        find = types.KeyboardButton("ðŸ“šÐÐ°Ð¹Ñ‚Ð¸ ÐºÐ½Ð¸Ð³Ñƒ")
        mark = types.KeyboardButton("ðŸŒŸÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ†ÐµÐ½ÐºÑƒ")
        rating = types.KeyboardButton("ðŸ“ŠÐ ÐµÐ¹Ñ‚Ð¸Ð½Ð³")
        rand = types.KeyboardButton("ðŸŽ²Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ð°Ñ ÐºÐ½Ð¸Ð³Ð°")
        help = types.KeyboardButton('â“ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ Ð¸ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ')
        game = types.KeyboardButton('ðŸŽ¯Ð’Ð¸ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð°')
        markup.add(find, mark, rating, rand, game)
        markup.add(help)
        bot.send_message(message.chat.id, "Ð’Ñ‹ ÑÐ½Ð¾Ð²Ð° Ð² Ð³Ð»Ð°Ð²Ð½Ð¾Ð¼ Ð¼ÐµÐ½ÑŽ", reply_markup=markup)
        bot.register_next_step_handler(message, bot_message)
    elif message.text == "âœ¨Ð¢Ð¾Ð¿ Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²":
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        back = types.KeyboardButton("âªÐ½Ð°Ð·Ð°Ð´")
        markup.add(back)
        users += [0] * 10
        rezults += [0] * 10
        names += ["empty"] * 10
        top_list = []
        save = []
        msg = ""
        for i in range(len(rezults)):
            save += [rezults[i]]
        top_list = list(sorted(rezults)[::-1])
        for i in range(10):
            for j in range(len(rezults)):
                if top_list[i] == rezults[j]:
                    msg += str(i + 1) + " Ð¼ÐµÑÑ‚Ð¾ - " + names[j] + " -  Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ñ… Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð²: " + str(rezults[j]) + "\n"
                    rezults[j] = -9999
                    break
        for i in range(len(rezults)):
            rezults[i] = save[i]
        bot.send_message(message.chat.id, "Ð¢ÐžÐŸ - 10 Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²:\n" + msg, reply_markup=markup)
        bot.register_next_step_handler(message, bot_message)
    elif message.text == "âªÐ½Ð°Ð·Ð°Ð´":
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        find = types.KeyboardButton("ðŸ“šÐÐ°Ð¹Ñ‚Ð¸ ÐºÐ½Ð¸Ð³Ñƒ")
        mark = types.KeyboardButton("ðŸŒŸÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ†ÐµÐ½ÐºÑƒ")
        rating = types.KeyboardButton("ðŸ“ŠÐ ÐµÐ¹Ñ‚Ð¸Ð½Ð³")
        rand = types.KeyboardButton("ðŸŽ²Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ð°Ñ ÐºÐ½Ð¸Ð³Ð°")
        help = types.KeyboardButton('â“ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ Ð¸ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ')
        game = types.KeyboardButton('ðŸŽ¯Ð’Ð¸ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð°')
        markup.add(find, mark, rating, rand, game)
        markup.add(help)
        bot.send_message(message.chat.id, "Ð’Ñ‹ ÑÐ½Ð¾Ð²Ð° Ð² Ð³Ð»Ð°Ð²Ð½Ð¾Ð¼ Ð¼ÐµÐ½ÑŽ", reply_markup=markup)
        bot.register_next_step_handler(message, bot_message)

def game2(message):
    global rez
    if message.text == "ÐžÐ±Ð»Ð¾Ð¼Ð¾Ð², Ð˜. Ð“Ð¾Ð½Ñ‡Ð°Ñ€Ð¾Ð²":
        bot.send_message(message.chat.id, "ðŸŽ‰ðŸŽ‰ðŸŽ‰\nÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²Ð»ÑÑŽ, ÑÑ‚o Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚")
        rez += 1
    else:
        bot.send_message(message.chat.id, "ðŸ˜”ðŸ˜”ðŸ˜”\nÐš ÑÐ¾Ð¶Ð°Ð»ÐµÐ½Ð¸ÑŽ, ÑÑ‚Ð¾ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚.\nÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚ - ÐžÐ±Ð»Ð¾Ð¼Ð¾Ð², Ð˜. Ð“Ð¾Ð½Ñ‡Ð°Ñ€Ð¾Ð²")
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    ans1 = types.KeyboardButton("Ð“Ð¾Ñ€Ð¾Ð´ Ð¸ Ð»ÐµÑ Ñƒ Ð¼Ð¾Ñ€Ñ, Ð’. Ð‘Ð¸Ð°Ð½ÐºÐ¸")
    ans2 = types.KeyboardButton("Ð’ Ð®Ð¶Ð½Ñ‹Ñ… Ð¼Ð¾Ñ€ÑÑ…, Ð . Ð¡Ñ‚Ð¸Ð²ÐµÐ½ÑÐ¾Ð½")
    ans3 = types.KeyboardButton("Ð¡Ñ‚Ð°Ñ€Ð¸Ðº Ð¸ Ð¼Ð¾Ñ€Ðµ, Ð­. Ð¥ÑÐ¼Ð¸Ð½Ð³ÑƒÑÐ¹")
    markup.add(ans1)
    markup.add(ans2)
    markup.add(ans3)
    bot.send_message(message.chat.id, "Ð Ñ‹Ð±Ð°Ðº Ð² Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚Ðµ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ÑÑ Ð½Ð° Ð¼Ð¾Ñ€ÑÐºÑƒÑŽ Ð¾Ñ…Ð¾Ñ‚Ñƒ. ÐŸÐ¾Ð¹Ð¼Ð°Ð½Ð½Ð°Ñ Ð´Ð¾Ð±Ñ‹Ñ‡Ð° ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð²ÐµÐ»Ð¸ÐºÐ°. ÐžÐ½Ð° Ð½Ðµ Ð¿Ð¾Ð¼ÐµÑ‰Ð°ÐµÑ‚ÑÑ Ð² Ð»Ð¾Ð´ÐºÑƒ, Ð° Ð½Ð° Ñ€Ñ‹Ð±Ð°ÐºÐ° Ð½Ð°Ð¿Ð°Ð´Ð°ÑŽÑ‚ Ð°ÐºÑƒÐ»Ñ‹.", reply_markup=markup)
    bot.register_next_step_handler(message, game3)

def game3(message):
    global rez
    if message.text == "Ð¡Ñ‚Ð°Ñ€Ð¸Ðº Ð¸ Ð¼Ð¾Ñ€Ðµ, Ð­. Ð¥ÑÐ¼Ð¸Ð½Ð³ÑƒÑÐ¹":
        bot.send_message(message.chat.id, "ðŸŽ‰ðŸŽ‰ðŸŽ‰\nÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²Ð»ÑÑŽ, ÑÑ‚o Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚")
        rez += 1
    else:
        bot.send_message(message.chat.id, "ðŸ˜”ðŸ˜”ðŸ˜”\nÐš ÑÐ¾Ð¶Ð°Ð»ÐµÐ½Ð¸ÑŽ, ÑÑ‚Ð¾ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚.\nÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚ - Ð¡Ñ‚Ð°Ñ€Ð¸Ðº Ð¸ Ð¼Ð¾Ñ€Ðµ, Ð­. Ð¥ÑÐ¼Ð¸Ð½Ð³ÑƒÑÐ¹")
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    ans1 = types.KeyboardButton("ÐÐ½Ð½Ð° ÐšÐ°Ñ€ÐµÐ½Ð¸Ð½Ð°, Ð›.Ð. Ð¢Ð¾Ð»ÑÑ‚Ð¾Ð¹")
    ans2 = types.KeyboardButton("ÐœÐ°Ð´Ð°Ð¼ Ð‘Ð¾Ð²Ð°Ñ€Ð¸, Ð“. Ð¤Ð»Ð¾Ð±ÐµÑ€")
    ans3 = types.KeyboardButton("Ð£Ð½ÐµÑÐµÐ½Ð½Ñ‹Ð¹ Ð²ÐµÑ‚Ñ€Ð¾Ð¼, Ðœ. ÐœÐ¸Ñ‚Ñ‡ÐµÐ»Ð»")
    markup.add(ans1)
    markup.add(ans2)
    markup.add(ans3)
    bot.send_message(message.chat.id, "Ð—Ð°Ð¼ÑƒÐ¶ÐµÑÑ‚Ð²Ð¾ Ð½Ðµ Ð¿Ð¾Ð¼ÐµÑˆÐ°Ð»Ð¾ ÐµÐ¹ Ð·Ð°Ð²ÐµÑÑ‚Ð¸ Ñ€Ð¾Ð¼Ð°Ð½ Ð½Ð° ÑÑ‚Ð¾Ñ€Ð¾Ð½Ðµ. ÐžÑ‚Ð½Ð¾ÑˆÐµÐ½Ð¸Ñ Ñ Ð»ÑŽÐ±Ð¾Ð²Ð½Ð¸ÐºÐ¾Ð¼ Ð·Ð°ÑˆÐ»Ð¸ Ð² Ñ‚ÑƒÐ¿Ð¸Ðº. Ð”Ð°Ð¼Ð° Ð¿Ñ€Ð¸ÑÑ‚Ñ€Ð°ÑÑ‚Ð¸Ð»Ð°ÑÑŒ Ðº Ð½Ð°Ñ€ÐºÐ¾Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¼ Ð²ÐµÑ‰ÐµÑÑ‚Ð²Ð°Ð¼, Ð° Ð¿Ð¾ÑÐ»Ðµ Ð±Ñ€Ð¾ÑÐ¸Ð»Ð°ÑÑŒ Ð¿Ð¾Ð´ Ð¿Ð¾ÐµÐ·Ð´.", reply_markup=markup)
    bot.register_next_step_handler(message, game4)

def game4(message):
    global rez
    if message.text == "ÐÐ½Ð½Ð° ÐšÐ°Ñ€ÐµÐ½Ð¸Ð½Ð°, Ð›.Ð. Ð¢Ð¾Ð»ÑÑ‚Ð¾Ð¹":
        bot.send_message(message.chat.id, "ðŸŽ‰ðŸŽ‰ðŸŽ‰\nÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²Ð»ÑÑŽ, ÑÑ‚o Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚")
        rez += 1
    else:
        bot.send_message(message.chat.id, "ðŸ˜”ðŸ˜”ðŸ˜”\nÐš ÑÐ¾Ð¶Ð°Ð»ÐµÐ½Ð¸ÑŽ, ÑÑ‚Ð¾ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚.\nÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚ - ÐÐ½Ð½Ð° ÐšÐ°Ñ€ÐµÐ½Ð¸Ð½Ð°, Ð›.Ð. Ð¢Ð¾Ð»ÑÑ‚Ð¾Ð¹")
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    ans1 = types.KeyboardButton("Â«Ð”ÐµÑ‚ÑÑ‚Ð²Ð¾. ÐžÑ‚Ñ€Ð¾Ñ‡ÐµÑÑ‚Ð²Ð¾. Ð®Ð½Ð¾ÑÑ‚ÑŒ.Â», Ð›.Ð. Ð¢Ð¾Ð»ÑÑ‚Ð¾Ð¹")
    ans2 = types.KeyboardButton("ÐÐ°Ð´ Ð¿Ñ€Ð¾Ð¿Ð°ÑÑ‚ÑŒÑŽ Ð²Ð¾ Ñ€Ð¶Ð¸, Ð”.Ð¡ÑÐ»Ð¸Ð½Ð´Ð¶ÐµÑ€")
    ans3 = types.KeyboardButton("Ð’Ð¸Ð½Ð¾ Ð¸Ð· Ð¾Ð´ÑƒÐ²Ð°Ð½Ñ‡Ð¸ÐºÐ¾Ð², Ð . Ð‘Ñ€ÑÐ´Ð±ÐµÑ€Ð¸")
    markup.add(ans1)
    markup.add(ans2)
    markup.add(ans3)
    bot.send_message(message.chat.id, "Ð®Ð½Ñ‹Ð¹ Ð¿Ð°Ñ€ÐµÐ½ÑŒ Ð½ÐµÐ½Ð°Ð²Ð¸Ð´Ð¸Ñ‚ Ð»Ð¸Ñ†ÐµÐ¼ÐµÑ€Ð¸Ðµ Ð¸ Ð¸ÑÐ¿Ñ‹Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð½ÐµÐ¶Ð½Ñ‹Ðµ Ð±Ñ€Ð°Ñ‚ÑÐºÐ¸Ðµ Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð° Ðº ÑÐµÑÑ‚Ñ€Ðµ Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ð¼ Ð´ÐµÑ‚Ð¸ÑˆÐºÐ°Ð¼. ÐŸÐ¾ÐºÐ° Ð¾Ð½ Ð¼ÐµÑ‡Ñ‚Ð°ÐµÑ‚ Ð¾ Ð¿Ñ€Ð¾Ð³ÑƒÐ»ÐºÐ°Ñ… Ñ Ñ€ÐµÐ±ÑÑ‚Ð½ÐµÐ¹ Ð² Ð¿Ð¾Ð»ÑÑ…, ÐµÐ³Ð¾ Ð¾Ñ‚Ñ‡Ð¸ÑÐ»ÑÑŽÑ‚ Ð¸Ð· ÑˆÐºÐ¾Ð»Ñ‹.\n\nÐžÑ‚ Ð»Ð¸Ñ†Ð° Ð°Ð²Ñ‚Ð¾Ñ€Ð° ÑÑ‚Ð¾Ð³Ð¾ Ð±Ð¾Ñ‚Ð°, Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÑŽ Ðº Ð¿Ñ€Ð¾Ñ‡Ñ‚ÐµÐ½Ð¸ÑŽ Ð´Ð°Ð½Ð½ÑƒÑŽ ÐºÐ½Ð¸Ð³ÑƒðŸ˜‰", reply_markup=markup)
    bot.register_next_step_handler(message, game5)

def game5(message):
    global rez
    if message.text == "ÐÐ°Ð´ Ð¿Ñ€Ð¾Ð¿Ð°ÑÑ‚ÑŒÑŽ Ð²Ð¾ Ñ€Ð¶Ð¸, Ð”.Ð¡ÑÐ»Ð¸Ð½Ð´Ð¶ÐµÑ€":
        bot.send_message(message.chat.id, "ðŸŽ‰ðŸŽ‰ðŸŽ‰\nÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²Ð»ÑÑŽ, ÑÑ‚o Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚")
        rez += 1
    else:
        bot.send_message(message.chat.id, "ðŸ˜”ðŸ˜”ðŸ˜”\nÐš ÑÐ¾Ð¶Ð°Ð»ÐµÐ½Ð¸ÑŽ, ÑÑ‚Ð¾ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚.\nÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚ - ÐÐ°Ð´ Ð¿Ñ€Ð¾Ð¿Ð°ÑÑ‚ÑŒÑŽ Ð²Ð¾ Ñ€Ð¶Ð¸, Ð”.Ð¡ÑÐ»Ð¸Ð½Ð´Ð¶ÐµÑ€")
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    ans1 = types.KeyboardButton("Ð£Ð±Ð¸Ñ‚ÑŒ Ð¿ÐµÑ€ÐµÑÐ¼ÐµÑˆÐ½Ð¸ÐºÐ°, Ð¥. Ð›Ð¸")
    ans2 = types.KeyboardButton("Ð”ÐµÑÑÑ‚ Ð½ÐµÐ³Ñ€Ð¸Ñ‚ÑÑ‚, Ð. ÐšÑ€Ð¸ÑÑ‚Ð¸")
    ans3 = types.KeyboardButton("Ð—ÐµÐ»ÐµÐ½Ð°Ñ Ð¼Ð¸Ð»Ñ, Ð¡. ÐšÐ¸Ð½Ð³")
    markup.add(ans1)
    markup.add(ans2)
    markup.add(ans3)
    bot.send_message(message.chat.id, 'Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¾ Ñ‡ÐµÑ€Ð½Ð¾ÐºÐ¾Ð¶ÐµÐ¼ Ð¿Ð°Ñ€Ð½Ðµ, Ð¿Ð¾Ð³Ð¸Ð±ÑˆÐµÐ¼ Ð¿Ñ€Ð¸ Ð¿Ð¾Ð¿Ñ‹Ñ‚ÐºÐµ ÑÐ±ÐµÐ¶Ð°Ñ‚ÑŒ Ð¸Ð· Ñ‚ÑŽÑ€ÑŒÐ¼Ñ‹, ÐºÑƒÐ´Ð° ÐµÐ³Ð¾ Ð½ÐµÐ·Ð°ÑÐ»ÑƒÐ¶ÐµÐ½Ð½Ð¾ Ð¿Ð¾ÑÐ°Ð´Ð¸Ð»Ð¸ Ð·Ð° "Ð½Ð°ÑÐ¸Ð»Ð¸Ðµ". Ð Ñ‚Ð°ÐºÐ¶Ðµ Ð¾ Ñ€Ð¾Ð±ÐºÐ¾Ð¼, Ð¿ÑƒÐ³Ð»Ð¸Ð²Ð¾Ð¼ Ñ‡ÑƒÐ´Ð°ÐºÐµ, ÑÐ¿Ð°ÑÑˆÐµÐ¼ Ð°Ð¼ÐµÑ€Ð¸ÐºÐ°Ð½ÑÐºÐ¸Ñ… Ð´ÐµÑ‚ÐµÐ¹ Ð¾Ñ‚ Ð½Ð°Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ.', reply_markup=markup)
    bot.register_next_step_handler(message, game6)

def game6(message):
    global rez
    if message.text == "Ð£Ð±Ð¸Ñ‚ÑŒ Ð¿ÐµÑ€ÐµÑÐ¼ÐµÑˆÐ½Ð¸ÐºÐ°, Ð¥. Ð›Ð¸":
        bot.send_message(message.chat.id, "ðŸŽ‰ðŸŽ‰ðŸŽ‰\nÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²Ð»ÑÑŽ, ÑÑ‚o Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚")
        rez += 1
    else:
        bot.send_message(message.chat.id, "ðŸ˜”ðŸ˜”ðŸ˜”\nÐš ÑÐ¾Ð¶Ð°Ð»ÐµÐ½Ð¸ÑŽ, ÑÑ‚Ð¾ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚.\nÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚ - Ð£Ð±Ð¸Ñ‚ÑŒ Ð¿ÐµÑ€ÐµÑÐ¼ÐµÑˆÐ½Ð¸ÐºÐ°, Ð¥. Ð›Ð¸")
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    ans1 = types.KeyboardButton("ÐÑÑ, Ð˜.Ð¡. Ð¢ÑƒÑ€Ð³ÐµÐ½ÐµÐ²")
    ans2 = types.KeyboardButton("Ð•Ð²Ð³ÐµÐ½Ð¸Ð¹ ÐžÐ½ÐµÐ³Ð¸Ð½, Ð.Ð¡. ÐŸÑƒÑˆÐºÐ¸Ð½")
    ans3 = types.KeyboardButton("Ð‘ÐµÐ´Ð½Ð°Ñ Ð›Ð¸Ð·Ð°, Ð. ÐšÐ°Ñ€Ð°Ð¼Ð·Ð¸Ð½")
    markup.add(ans1)
    markup.add(ans2)
    markup.add(ans3)
    bot.send_message(message.chat.id, 'Ð’ ÑÑ‚Ð¾Ð¼ Ñ€Ð¾Ð¼Ð°Ð½Ðµ Ð°Ð²Ñ‚Ð¾Ñ€ Ð¿Ð¾Ð´Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ð¾ Ñ‚Ð¾Ð¼, ÑÑ‚Ð¾Ð¸Ñ‚ Ð»Ð¸ Ð¶ÐµÐ½Ñ‰Ð¸Ð½Ðµ Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð¿ÐµÑ€Ð²Ñ‹Ð¹ ÑˆÐ°Ð³, Ð½Ðµ Ð´Ð¾Ð¶Ð¸Ð´Ð°ÑÑÑŒ Ð¿Ñ€Ð¸Ð·Ð½Ð°Ð½Ð¸Ñ Ð² Ð»ÑŽÐ±Ð²Ð¸ Ð¾Ñ‚ Ð¼ÑƒÐ¶Ñ‡Ð¸Ð½Ñ‹.', reply_markup=markup)
    bot.register_next_step_handler(message, game7)

def game7(message):
    global rez
    if message.text == "Ð•Ð²Ð³ÐµÐ½Ð¸Ð¹ ÐžÐ½ÐµÐ³Ð¸Ð½, Ð.Ð¡. ÐŸÑƒÑˆÐºÐ¸Ð½":
        rez += 1
        bot.send_message(message.chat.id, "ðŸŽ‰ðŸŽ‰ðŸŽ‰\nÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²Ð»ÑÑŽ, ÑÑ‚o Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚")
    else:
        bot.send_message(message.chat.id, "ðŸ˜”ðŸ˜”ðŸ˜”\nÐš ÑÐ¾Ð¶Ð°Ð»ÐµÐ½Ð¸ÑŽ, ÑÑ‚Ð¾ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚.\nÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚ - Ð•Ð²Ð³ÐµÐ½Ð¸Ð¹ ÐžÐ½ÐµÐ³Ð¸Ð½, Ð.Ð¡. ÐŸÑƒÑˆÐºÐ¸Ð½")
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    ans1 = types.KeyboardButton("Ð“Ñ€Ð°Ð½Ð°Ñ‚Ð¾Ð²Ñ‹Ð¹ Ð±Ñ€Ð°ÑÐ»ÐµÑ‚, Ð.Ð˜. ÐšÑƒÐ¿Ñ€Ð¸Ð½")
    ans2 = types.KeyboardButton("Ð–Ð¸Ð·Ð½ÑŒ Ð²Ð·Ð°Ð¹Ð¼Ñ‹, Ð­.Ðœ. Ð ÐµÐ¼Ð°Ñ€Ðº")
    ans3 = types.KeyboardButton("Ð¨Ð¸Ð½ÐµÐ»ÑŒ, Ð. Ð“Ð¾Ð³Ð¾Ð»ÑŒ")
    markup.add(ans1)
    markup.add(ans2)
    markup.add(ans3)
    bot.send_message(message.chat.id,'Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¾ Ñ‚Ð¾Ð¼, ÐºÐ°Ðº Ð¼ÐµÐ»ÐºÐ¸Ð¹ ÑÐ»ÑƒÐ¶Ð°Ñ‰Ð¸Ð¹ Ð¿Ñ€Ð¸Ð¾Ð±Ñ€ÐµÐ» Ð¸ Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ» Ð¾Ð´Ð¸Ð½ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚ Ð³Ð°Ñ€Ð´ÐµÑ€Ð¾Ð±Ð°, Ð¿Ð¾ÑÐ»Ðµ Ñ‡ÐµÐ³Ð¾ ÑƒÐ¼ÐµÑ€ Ð¸ ÑÑ‚Ð°Ð» Ð¿Ñ€Ð¸Ð·Ñ€Ð°ÐºÐ¾Ð¼.',reply_markup=markup)
    bot.register_next_step_handler(message, game8)

def game8(message):
    global rez
    if message.text == "Ð¨Ð¸Ð½ÐµÐ»ÑŒ, Ð. Ð“Ð¾Ð³Ð¾Ð»ÑŒ":
        rez += 1
        bot.send_message(message.chat.id, "ðŸŽ‰ðŸŽ‰ðŸŽ‰\nÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²Ð»ÑÑŽ, ÑÑ‚o Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚")
    else:
        bot.send_message(message.chat.id, "ðŸ˜”ðŸ˜”ðŸ˜”\nÐš ÑÐ¾Ð¶Ð°Ð»ÐµÐ½Ð¸ÑŽ, ÑÑ‚Ð¾ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚.\nÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚ - Ð¨Ð¸Ð½ÐµÐ»ÑŒ, Ð. Ð“Ð¾Ð³Ð¾Ð»ÑŒ")
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    ans1 = types.KeyboardButton("ÐŸÐ¾Ñ€Ñ‚Ñ€ÐµÑ‚ Ð”Ð¾Ñ€Ð¸Ð°Ð½Ð° Ð“Ñ€ÐµÑ, Ðž. Ð£Ð°Ð¹Ð»ÑŒÐ´")
    ans2 = types.KeyboardButton("Ð¨Ð°Ð³Ñ€ÐµÐ½ÐµÐ²Ð°Ñ ÐºÐ¾Ð¶Ð°, Ðž. Ð‘Ð°Ð»ÑŒÐ·Ð°Ðº")
    ans3 = types.KeyboardButton("Ð’ÐµÐ»Ð¸ÐºÐ¸Ð¹ Ð“ÑÑ‚ÑÐ±Ð¸, Ð¤.Ð¡. Ð¤Ð¸Ñ†Ð´Ð¶ÐµÑ€Ð°Ð»ÑŒÐ´")
    markup.add(ans1)
    markup.add(ans2)
    markup.add(ans3)
    bot.send_message(message.chat.id,'ÐœÐ¾Ð»Ð¾Ð´Ð¾Ð¹ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº Ð²Ð½ÐµÐ·Ð°Ð¿Ð½Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð¿Ð¾Ð´Ð°Ñ€Ð¾Ðº Ð¸Ð· Ð½Ð°Ñ‚ÑƒÑ€Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°. ÐŸÑ€ÐµÐ´Ð¼ÐµÑ‚ Ð¸ÑÐ¿Ð¾Ð»Ð½ÑÐµÑ‚ Ð»ÑŽÐ±Ñ‹Ðµ Ð¶ÐµÐ»Ð°Ð½Ð¸Ñ, Ð¿Ñ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ°ÑÑÑŒ Ð¸ ÑÐ¾ÐºÑ€Ð°Ñ‰Ð°Ñ Ð¶Ð¸Ð·Ð½ÑŒ Ð³Ð»Ð°Ð²Ð½Ð¾Ð³Ð¾ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð¶Ð°. Ð’ Ð¸Ñ‚Ð¾Ð³Ðµ Ð³ÐµÑ€Ð¾Ð¹ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð±Ð¾Ð³Ð°Ñ‚ÑÑ‚Ð²Ð° Ð¸ Ð±Ð»Ð°Ð³Ð¾ÑÐºÐ»Ð¾Ð½Ð½Ð¾ÑÑ‚ÑŒ ÑÐ¾ÑÑ‚Ð¾ÑÑ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð´Ð°Ð¼, Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÐµÑ‚, Ñ‡Ñ‚Ð¾ Ð¸ÑÑ‚Ð¸Ð½Ð½Ð°Ñ Ð»ÑŽÐ±Ð¾Ð²ÑŒ Ð²ÑÐµÐ³Ð´Ð° Ð±Ñ‹Ð»Ð° Ñ€ÑÐ´Ð¾Ð¼, Ð¸ ÑƒÐ¼Ð¸Ñ€Ð°ÐµÑ‚.',reply_markup=markup)
    bot.register_next_step_handler(message, game9)

def game9(message):
    global rez
    if message.text == "Ð¨Ð°Ð³Ñ€ÐµÐ½ÐµÐ²Ð°Ñ ÐºÐ¾Ð¶Ð°, Ðž. Ð‘Ð°Ð»ÑŒÐ·Ð°Ðº":
        rez += 1
        bot.send_message(message.chat.id, "ðŸŽ‰ðŸŽ‰ðŸŽ‰\nÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²Ð»ÑÑŽ, ÑÑ‚o Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚")
    else:
        bot.send_message(message.chat.id, "ðŸ˜”ðŸ˜”ðŸ˜”\nÐš ÑÐ¾Ð¶Ð°Ð»ÐµÐ½Ð¸ÑŽ, ÑÑ‚Ð¾ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚.\nÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚ - Ð¨Ð°Ð³Ñ€ÐµÐ½ÐµÐ²Ð°Ñ ÐºÐ¾Ð¶Ð°, Ðž. Ð‘Ð°Ð»ÑŒÐ·Ð°Ðº")
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    ans1 = types.KeyboardButton("Ð’Ð¾Ð¹Ð½Ð° Ð¸ Ð¼Ð¸Ñ€, Ð›.Ð. Ð¢Ð¾Ð»ÑÑ‚Ð¾Ð¹")
    ans2 = types.KeyboardButton("Ð“Ð¾Ñ€Ðµ Ð¾Ñ‚ ÑƒÐ¼Ð°, Ð.Ð¡. Ð“Ñ€Ð¸Ð±Ð¾ÐµÐ´Ð¾Ð²")
    ans3 = types.KeyboardButton("Ð£Ð½Ð¸Ð¶ÐµÐ½Ð½Ñ‹Ðµ Ð¸ Ð¾ÑÐºÐ¾Ñ€Ð±Ð»ÐµÐ½Ð½Ñ‹Ðµ, Ð¤.Ðœ. Ð”Ð¾ÑÑ‚Ð¾ÐµÐ²ÑÐºÐ¸Ð¹")
    markup.add(ans1)
    markup.add(ans2)
    markup.add(ans3)
    bot.send_message(message.chat.id,'Ð¡ÐºÐ²Ð¾Ð·ÑŒ Ð²Ð¾ÐµÐ½Ð½Ñ‹Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ, Ð¿Ð¾Ñ‚ÐµÑ€Ð¸ Ð¸ Ð¿ÐµÑ€Ð¸Ð¿ÐµÑ‚Ð¸Ð¸ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ€ÑƒÑÑÐºÐ¸Ñ… Ð¿Ð°Ñ€ Ð½Ð°Ñ…Ð¾Ð´ÑÑ‚ Ð´Ñ€ÑƒÐ³ Ð´Ñ€ÑƒÐ³Ð° Ð¸ ÑÐ¾ÑÑ‚Ð°Ð²Ð»ÑÑŽÑ‚ ÑƒÐ´Ð°Ñ‡Ð½Ñ‹Ðµ Ð¿Ð°Ñ€Ñ‚Ð¸Ð¸.',reply_markup=markup)
    bot.register_next_step_handler(message, game10)

def game10(message):
    global rez
    if message.text == "Ð’Ð¾Ð¹Ð½Ð° Ð¸ Ð¼Ð¸Ñ€, Ð›.Ð. Ð¢Ð¾Ð»ÑÑ‚Ð¾Ð¹":
        rez += 1
        bot.send_message(message.chat.id, "ðŸŽ‰ðŸŽ‰ðŸŽ‰\nÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²Ð»ÑÑŽ, ÑÑ‚o Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚")
    else:
        bot.send_message(message.chat.id, "ðŸ˜”ðŸ˜”ðŸ˜”\nÐš ÑÐ¾Ð¶Ð°Ð»ÐµÐ½Ð¸ÑŽ, ÑÑ‚Ð¾ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚.\nÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚ - Ð’Ð¾Ð¹Ð½Ð° Ð¸ Ð¼Ð¸Ñ€, Ð›.Ð. Ð¢Ð¾Ð»ÑÑ‚Ð¾Ð¹")
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    ans1 = types.KeyboardButton("Ð¦Ð°Ñ€ÑŒ Ð­Ð´Ð¸Ð¿, Ð¡Ð¾Ñ„Ð¾ÐºÐ»")
    ans2 = types.KeyboardButton("ÐžÑ‚Ñ†Ñ‹ Ð¸ Ð´ÐµÑ‚Ð¸, Ð˜.Ð¡. Ð¢ÑƒÑ€Ð³ÐµÐ½ÐµÐ²")
    ans3 = types.KeyboardButton("Ð“Ð°Ð¼Ð»ÐµÑ‚, Ð£. Ð¨ÐµÐºÑÐ¿Ð¸Ñ€")
    markup.add(ans1)
    markup.add(ans2)
    markup.add(ans3)
    bot.send_message(message.chat.id,'Ð“Ð»Ð°Ð²Ð½Ñ‹Ð¹ Ð³ÐµÑ€Ð¾Ð¹ Ð²Ð¸Ð´Ð¸Ñ‚ Ð¿Ñ€Ð¸Ð·Ñ€Ð°Ðº Ð¾Ñ‚Ñ†Ð°. Ð•Ð³Ð¾ Ð²Ð¾Ð·Ð»ÑŽÐ±Ð»ÐµÐ½Ð½Ð°Ñ ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑÑ ÑÑƒÐ¼Ð°ÑÑˆÐµÐ´ÑˆÐµÐ¹. Ð’ Ð¸Ñ‚Ð¾Ð³Ðµ Ð²ÑÐµ ÑƒÐ¼Ð¸Ñ€Ð°ÑŽÑ‚.',reply_markup=markup)
    bot.register_next_step_handler(message, end)

def end(message):
    global rez
    if message.text == "Ð“Ð°Ð¼Ð»ÐµÑ‚, Ð£. Ð¨ÐµÐºÑÐ¿Ð¸Ñ€":
        rez += 1
        bot.send_message(message.chat.id, "ðŸŽ‰ðŸŽ‰ðŸŽ‰\nÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²Ð»ÑÑŽ, ÑÑ‚o Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚")
    else:
        bot.send_message(message.chat.id, "ðŸ˜”ðŸ˜”ðŸ˜”\nÐš ÑÐ¾Ð¶Ð°Ð»ÐµÐ½Ð¸ÑŽ, ÑÑ‚Ð¾ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚.\nÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚ - Ð“Ð°Ð¼Ð»ÐµÑ‚, Ð£. Ð¨ÐµÐºÑÐ¿Ð¸Ñ€")
    if rez>7:
        bot.send_message(message.chat.id, "Ð’Ð°Ñƒ, Ð¼Ð¾Ð»Ð¾Ð´ÐµÑ†! Ð¢Ñ‹ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ð¾ Ð·Ð½Ð°ÐµÑˆÑŒ Ð¾Ñ‡ÐµÐ½ÑŒ Ð¼Ð½Ð¾Ð³Ð¾ ÐºÐ½Ð¸Ð³.\nÐ’ÑÐµÐ³Ð¾ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ñ… Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð² - " + str(rez))
    elif rez>4:
        bot.send_message(message.chat.id, "ÐœÐ¾Ð³Ð»Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ð¸ Ð»ÑƒÑ‡ÑˆÐµ, Ð½Ð¾ Ñ‚Ñ‹ Ð²ÑÐµ Ñ€Ð°Ð²Ð½Ð¾ Ð¼Ð¾Ð»Ð¾Ð´ÐµÑ†! Ð¡Ð¾Ð²ÐµÑ‚ÑƒÑŽ Ñ‚ÐµÐ±Ðµ Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ ÐºÐ½Ð¸Ð³Ð¸, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ñ‚Ñ‹ Ð½Ðµ ÑÐ¼Ð¾Ð³ ÑƒÐ³Ð°Ð´Ð°Ñ‚ÑŒ. ÐžÐ±ÐµÑ‰Ð°ÑŽ, ÑÑ‚Ð¾ Ð±ÑƒÐ´ÐµÑ‚ Ð¾Ñ‡ÐµÐ½ÑŒ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾!\nÐ’ÑÐµÐ³Ð¾ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ñ… Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð² - " + str(rez))
    else:
        bot.send_message(message.chat.id, "ÐžÐ¹-Ð¾Ð¹! ÐÐµ Ð½ÑƒÐ¶Ð½Ð¾ Ð±Ñ‹Ð»Ð¾ ÑÐ¿Ð°Ñ‚ÑŒ Ð½Ð° ÑƒÑ€Ð¾ÐºÐ°Ñ… Ð»Ð¸Ñ‚ÐµÑ€Ð°Ñ‚ÑƒÑ€Ñ‹!\nÐ’ÑÐµÐ³Ð¾ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ñ… Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð² - " + str(rez))
    top = codecs.open("game.txt", 'a', encoding='utf-8')
    top.write('\n' + message.from_user.first_name + '"' + str(message.chat.id) + '"' + str(rez) + '\n')
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    find = types.KeyboardButton("ðŸ“šÐÐ°Ð¹Ñ‚Ð¸ ÐºÐ½Ð¸Ð³Ñƒ")
    mark = types.KeyboardButton("ðŸŒŸÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ†ÐµÐ½ÐºÑƒ")
    rating = types.KeyboardButton("ðŸ“ŠÐ ÐµÐ¹Ñ‚Ð¸Ð½Ð³")
    rand = types.KeyboardButton("ðŸŽ²Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ð°Ñ ÐºÐ½Ð¸Ð³Ð°")
    help = types.KeyboardButton('â“ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ Ð¸ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ')
    game = types.KeyboardButton('ðŸŽ¯Ð’Ð¸ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð°')
    markup.add(find, mark, rating, rand, game)
    markup.add(help)
    bot.send_message(message.chat.id, "Ð’Ñ‹ ÑÐ½Ð¾Ð²Ð° Ð² Ð³Ð»Ð°Ð²Ð½Ð¾Ð¼ Ð¼ÐµÐ½ÑŽ", reply_markup=markup)
    bot.register_next_step_handler(message, bot_message)
bot.polling(none_stop=True)
